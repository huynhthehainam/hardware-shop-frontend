(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[186],{3388:function(e,t,n){"use strict";n.r(t);var a,c=n(4),l=n(231),i=n(190),r=n(1),s=n(15),o=n(14),u=n(1325),d=n(3),j=n.n(d),b=n(7),m=n(37),h=n(89),p=n.n(h),x=Object(m.createAsyncThunk)("notesApp/labels/getLabels",Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/notes-app/labels");case 2:return t=e.sent,e.next=5,t.data;case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))),f=Object(m.createAsyncThunk)("notesApp/labels/updateLabels",function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/notes-app/update-labels",{labels:Object.values(t)});case 2:return n=e.sent,e.next=5,n.data;case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O=Object(m.createEntityAdapter)({}),v=O.getSelectors((function(e){return e.notesApp.labels})),g=v.selectAll,y=v.selectEntities,N=(v.selectById,Object(m.createSlice)({name:"notesApp/labels",initialState:O.getInitialState({labelsDialogOpen:!1}),reducers:{openLabelsDialog:function(e,t){e.labelsDialogOpen=!0},closeLabelsDialog:function(e,t){e.labelsDialogOpen=!1}},extraReducers:(a={},Object(c.a)(a,x.fulfilled,O.setAll),Object(c.a)(a,f.fulfilled,O.setAll),a)})),k=N.actions,w=k.openLabelsDialog,C=k.closeLabelsDialog,S=N.reducer,D=n(8),z=n(17),A=n(128),I=n(188),T=n(47),L=n(21),E=n(1335),F=n(1327),V=n(1328),R=n(765),_=n(1347),H=n(1330),P=n(1341),M=n(222),B=n(68);var U=function(e){return e=e||{},L.a.defaults(e,{id:B.a.generateGUID(),name:"",handle:B.a.handleize(e.name||"")})},W=n(6),q=n(76),G=n(0),J={name:""},Y=q.e().shape({name:q.g().required("You must enter a label title")});var K=function(e){var t=Object(s.useDispatch)(),n=Object(s.useSelector)((function(e){return e.notesApp.labels.entities})),a=Object(r.useState)(n),c=Object(z.a)(a,2),l=c[0],i=c[1],o=Object(T.useForm)({mode:"onChange",defaultValues:J,resolver:Object(I.a)(Y)}),u=o.control,d=o.formState,j=o.handleSubmit,b=o.reset,m=d.isValid,h=d.dirtyFields,p=d.errors;Object(r.useEffect)((function(){i(n)}),[n]);var x=Object(A.a)((function(e){t(f(e))}),300);return Object(r.useEffect)((function(){l&&!L.a.isEqual(l,n)&&x(l)}),[x,n,l]),Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(M.a,{className:"text-16 mb-8 font-semibold",children:"Edit Labels"}),Object(G.jsxs)(H.a,{dense:!0,children:[Object(G.jsx)("form",{onSubmit:j((function(e){var t=U(e);i(L.a.setIn(l,t.id,t)),b(J)})),children:Object(G.jsx)(P.a,{className:"p-0 mb-16",dense:!0,children:Object(G.jsx)(T.Controller,{name:"name",control:u,render:function(e){var t,n=e.field;return Object(G.jsx)(E.a,Object(D.a)(Object(D.a)({},n),{},{className:Object(W.default)("flex flex-1"),error:!!p.name,helperText:null===p||void 0===p||null===(t=p.name)||void 0===t?void 0:t.message,placeholder:"Create new label",variant:"outlined",InputProps:{startAdornment:Object(G.jsx)(_.a,{position:"start",children:Object(G.jsx)(F.a,{className:"list-item-icon text-16",color:"action",children:"add"})}),endAdornment:Object(G.jsx)(_.a,{position:"end",children:Object(G.jsx)(V.a,{className:"w-32 h-32 p-0","aria-label":"Delete",disabled:L.a.isEmpty(h)||!m,type:"submit",size:"large",children:Object(G.jsx)(F.a,{fontSize:"small",children:"check"})})})}}))}})})}),Object(r.useMemo)((function(){return Object.entries(l).map((function(e){var t=Object(z.a)(e,2),n=(t[0],t[1]);return Object(G.jsxs)(P.a,{className:"p-0 mb-8",dense:!0,children:[Object(G.jsx)(F.a,{className:"list-item-icon text-16",color:"action",children:"label"}),Object(G.jsx)(R.a,{className:Object(W.default)("flex flex-1 mx-8"),name:"name",value:n.name,onChange:function(e){return function(e,t){var n=U(L.a.setIn(t,e.target.name,e.target.value));i(L.a.setIn(l,n.id,n))}(e,n)},disableUnderline:!0}),Object(G.jsx)(V.a,{className:"w-32 h-32 mx-4 p-0","aria-label":"Delete",onClick:function(e){return function(e){i(L.a.omit(l,[e.id]))}(n)},size:"large",children:Object(G.jsx)(F.a,{fontSize:"small",children:"delete"})})]},n.id)}))}),[l])]})]})};var Q=function(e){var t=Object(s.useDispatch)(),n=Object(s.useSelector)((function(e){return e.notesApp.labels.labelsDialogOpen}));return Object(G.jsx)(u.a,{classes:{paper:"w-full max-w-320 p-16 m-24"},onClose:function(e){return t(C())},open:n,children:Object(G.jsx)(K,{})})},X=n(736),Z=n(54),$=n(1336),ee=n(1340),te=n(1337);var ne=function(e){return e=e||{},L.a.defaults(e,{id:B.a.generateGUID(),title:"",description:"",archive:!1,image:"",time:null,reminder:null,checklist:[],labels:[]})},ae=n(1564),ce=n(43);var le=function(e){var t=Object(s.useSelector)(y);if(!t)return null;var n=t[e.id];if(!n)return null;var a=e.linkable?{component:ce.a,onClick:function(e){e.stopPropagation()},to:"/apps/notes/labels/".concat(n.handle,"/").concat(n.id)}:{};return Object(G.jsx)(ae.a,Object(D.a)(Object(D.a)({},a),{},{label:n.name,classes:Object(D.a)({root:Object(W.default)("h-24",e.className),label:"px-12 py-4 text-11",deleteIcon:"w-16"},e.classes),variant:"outlined",onDelete:e.onDelete}))},ie=n(236);var re=function(e){return e.date?Object(G.jsx)(ae.a,{icon:Object(G.jsx)(F.a,{className:"text-16",children:"access_time"}),label:Object(ie.a)(new Date(e.date),"MMM dd yy, h:mm"),classes:Object(D.a)({root:Object(W.default)("h-24",e.className),label:"px-12 py-4 text-11",deleteIcon:"w-16"},e.classes),variant:"outlined",onDelete:e.onDelete}):null},se=n(66),oe=n(20);var ue=function(e){return e=e||{},L.a.defaults(e,{id:B.a.generateGUID(),text:"",checked:!1})},de={text:""},je=q.e().shape({text:q.g().required("You must enter a label title")});var be=function(e){var t=Object(T.useForm)({mode:"onChange",defaultValues:de,resolver:Object(I.a)(je)}),n=t.control,a=t.formState,c=t.handleSubmit,l=t.reset,i=a.isValid,r=a.dirtyFields,s=a.errors;return Object(G.jsx)("form",{onSubmit:c((function(t){e.onListItemAdd(ue(t)),l(de)})),children:Object(G.jsx)(P.a,{className:"p-0",dense:!0,children:Object(G.jsx)(T.Controller,{name:"text",control:n,render:function(e){var t,n=e.field;return Object(G.jsx)(E.a,Object(D.a)(Object(D.a)({},n),{},{className:"flex flex-1",error:!!s.text,helperText:null===s||void 0===s||null===(t=s.text)||void 0===t?void 0:t.message,placeholder:"Add an item",variant:"standard",autoFocus:!0,hiddenLabel:!0,InputProps:{disableUnderline:!0,className:"px-2",startAdornment:Object(G.jsx)(_.a,{position:"start",children:Object(G.jsx)(V.a,{className:"w-32 h-32 p-0 -mx-6","aria-label":"Add",type:"submit",disabled:L.a.isEmpty(r)||!i,size:"large",children:Object(G.jsx)(F.a,{fontSize:"small",children:"add"})})})}}))}})})})},me=n(1465);var he=function(e){function t(t){e.onListItemChange(L.a.setIn(e.item,t.target.name,"checkbox"===t.target.type?t.target.checked:t.target.value))}return e.item?Object(G.jsxs)(P.a,{className:"p-0",dense:!0,children:[Object(G.jsx)(me.a,{className:"p-0",checked:e.item.checked,tabIndex:-1,disableRipple:!0,name:"checked",onChange:t,color:"default"}),Object(G.jsx)(R.a,{className:Object(W.default)("flex flex-1 mx-8",e.item.checked&&"line-through opacity-50"),name:"text",value:e.item.text,onChange:t,disableUnderline:!0}),Object(G.jsx)(V.a,{className:"w-32 h-32 mx-4 p-0","aria-label":"Delete",onClick:function(){return e.onListItemRemove(e.item.id)},size:"large",children:Object(G.jsx)(F.a,{fontSize:"small",children:"delete"})})]},e.item.id):null};var pe=function(e){function t(t){e.onCheckListChange(e.checklist.map((function(e){return e.id===t.id?t:e})))}function n(t){e.onCheckListChange(e.checklist.filter((function(e){return e.id!==t})))}return e.checklist?Object(G.jsx)("div",{className:e.className,children:Object(G.jsxs)(H.a,{dense:!0,children:[e.checklist.map((function(e){return Object(G.jsx)(he,{item:e,onListItemChange:t,onListItemRemove:n},e.id)})),Object(G.jsx)(be,{onListItemAdd:function(t){e.onCheckListChange([].concat(Object(oe.a)(e.checklist),[t]))}})]})}):null},xe=n(733),fe=n(1342),Oe=n(764);var ve=function(e){var t=Object(s.useSelector)((function(e){return e.notesApp.labels.entities})),n=Object(r.useState)(null),a=Object(z.a)(n,2),c=a[0],l=a[1];function i(){l(null)}return Object(G.jsxs)("div",{children:[Object(G.jsx)(V.a,{className:"w-32 h-32 mx-4 p-0",onClick:function(e){e.stopPropagation(),l(e.currentTarget)},size:"large",children:Object(G.jsx)(F.a,{fontSize:"small",children:"label"})}),Object(G.jsx)(Oe.a,{hideBackdrop:!0,open:Boolean(c),anchorEl:c,onClose:i,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},className:"pointer-events-none",classes:{paper:"pointer-events-auto py-8 prevent-add-close"},children:Object(G.jsx)(xe.a,{onClickAway:i,children:Object(G.jsx)(H.a,{className:"p-0",children:Object.entries(t).map((function(t){var n=Object(z.a)(t,2),a=(n[0],n[1]);return Object(G.jsxs)(P.a,{button:!0,dense:!0,onClick:function(){return t=a.id,void e.onChange(L.a.xor(e.note.labels,[t]));var t},children:[Object(G.jsx)(F.a,{className:"list-item-icon text-16",color:"action",children:e.note.labels.includes(a.id)?"check_box":"check_box_outline_blank"}),Object(G.jsx)(fe.a,{className:"truncate px-8",primary:a.name,disableTypography:!0})]},a.id)}))})})})]})},ge=n(3217);var ye=function(e){var t=new Date(e.reminder);return Object(G.jsx)(ge.a,{clearable:!0,showTodayButton:!0,disablePast:!0,value:t,onChange:e.onChange,renderInput:function(e){return Object(G.jsx)(E.a,Object(D.a)({sx:{"& .MuiInputAdornment-root":{minWidth:40,minHeight:40,m:0},"& .MuiOutlinedInput-notchedOutline":{display:"none"},"& .MuiInputBase-input":{position:"absolute",pointerEvents:"none",visibility:"hidden"}}},e))},components:{OpenPickerIcon:function(){return Object(G.jsx)(F.a,{fontSize:"small",children:"notifications_active"})}}})};var Ne=function(e){return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)("label",{htmlFor:"button-file",children:[Object(G.jsx)("input",{accept:"image/*",className:"hidden",id:"button-file",type:"file",onChange:function(t){var n=t.target.files[0];if(n){var a=new FileReader;a.readAsBinaryString(n),a.onload=function(){e.onChange&&e.onChange("data:".concat(n.type,";base64,").concat(btoa(a.result)))},a.onerror=function(){console.log("error on load image")}}}}),Object(G.jsx)(V.a,{className:"w-32 h-32 mx-4 p-0",component:"span",size:"large",children:Object(G.jsx)(F.a,{fontSize:"small",children:"image"})})]})})},ke=q.e().shape({title:q.g(),description:q.g(),image:q.g(),checklist:q.a(),oneOfThemRequired:q.b().when(["title","description","image","checklist"],{is:function(e,t,n,a){return!e&&!t&&!n&&!a||!!e&&!!t&&!!n&&!!a},then:q.b().required(""),otherwise:q.b()})});function we(e){var t=Object(r.useState)(!1),n=Object(z.a)(t,2),a=n[0],c=n[1],l=Object(se.j)(),i=L.a.merge({},ne(),e.note,l.labelId?{labels:[l.labelId]}:null,"archive"===l.id?{archive:!0}:null),s=Object(T.useForm)({mode:"onChange",defaultValues:i,resolver:Object(I.a)(ke)}),o=s.formState,u=s.handleSubmit,d=s.getValues,j=(s.reset,s.watch),b=s.setValue,m=s.control,h=o.isValid,p=o.dirtyFields,x=(o.errors,j());function f(t){e.onCreate&&e.onCreate(t)}return Object(r.useEffect)((function(){e.note&&"new"!==e.variant&&e.onChange&&(L.a.isEqual(e.note,x)||e.onChange(x))}),[x,e,i]),Object(G.jsxs)("div",{className:"flex flex-col w-full",children:[Object(G.jsx)(Z.default,{className:"flex flex-auto w-full max-h-640",children:Object(G.jsxs)("div",{className:"w-full",children:[Object(G.jsx)(T.Controller,{name:"image",control:m,defaultValue:"",render:function(e){var t=e.field,n=t.onChange,a=t.value;return""===a?null:Object(G.jsxs)("div",{className:"relative",children:[Object(G.jsx)("img",{src:a,className:"w-full block",alt:"note"}),Object(G.jsx)(ee.a,{className:"absolute right-0 bottom-0 m-8",variant:"extended",size:"small",color:"secondary","aria-label":"Delete Image",type:"button",onClick:function(){return n("")},children:Object(G.jsx)(F.a,{fontSize:"small",children:"delete"})})]})}}),Object(G.jsx)("div",{className:"px-20 my-16",children:Object(G.jsx)(T.Controller,{name:"title",control:m,render:function(e){var t=e.field;return Object(G.jsx)(R.a,Object(D.a)(Object(D.a)({},t),{},{className:"font-semibold text-14",placeholder:"Title",type:"text",disableUnderline:!0,fullWidth:!0}))}})}),Object(G.jsx)("div",{className:"px-20 my-16",children:Object(G.jsx)(T.Controller,{name:"description",control:m,render:function(e){var t=e.field;return Object(G.jsx)(R.a,Object(D.a)(Object(D.a)({},t),{},{placeholder:"Take a note...",multiline:!0,rows:"4",disableUnderline:!0,fullWidth:!0}))}})}),Object(G.jsx)(T.Controller,{name:"checklist",control:m,defaultValue:[],render:function(e){var t=e.field,n=t.onChange,c=t.value;return 0!==c.length||a?Object(G.jsx)("div",{className:"px-16",children:Object(G.jsx)(pe,{checklist:c,onCheckListChange:function(e){return n(e)}})}):null}}),(x.labels||x.reminder||x.time)&&Object(G.jsxs)("div",{className:"flex flex-wrap w-full px-20 my-16 -mx-4",children:[x.reminder&&Object(G.jsx)(re,{className:"mt-4 mx-4",date:x.reminder,onDelete:function(){b("reminder",null)}}),Object(G.jsx)(T.Controller,{name:"labels",control:m,defaultValue:[],render:function(e){var t=e.field,n=t.onChange,a=t.value;return a?a.map((function(e){return Object(G.jsx)(le,{id:e,className:"mt-4 mx-4",onDelete:function(){return n(a.filter((function(t){return t!==e})))}},e)})):null}}),x.time&&Object(G.jsxs)(M.a,{color:"textSecondary",className:"text-12 mt-8 mx-4",children:["Edited: ",Object(ie.a)(new Date(x.time),"MMM dd yy, h:mm")]})]})]})}),Object(G.jsxs)("div",{className:"flex flex-auto justify-between items-center px-16 pb-12",children:[Object(G.jsxs)("div",{className:"flex items-center",children:[Object(G.jsx)(te.a,{title:"Remind me",placement:"bottom",children:Object(G.jsx)("div",{children:Object(G.jsx)(T.Controller,{name:"reminder",control:m,defaultValue:[],render:function(e){var t=e.field,n=t.onChange,a=t.value;return Object(G.jsx)(ye,{reminder:a,onChange:function(e){return n(e)}})}})})}),Object(G.jsx)(te.a,{title:"Add image",placement:"bottom",children:Object(G.jsx)("div",{children:Object(G.jsx)(Ne,{onChange:function(e){return b("image",e,{shouldDirty:!0,shouldValidate:!0})}})})}),Object(G.jsx)(te.a,{title:"Add checklist",placement:"bottom",children:Object(G.jsx)(V.a,{className:"w-32 h-32 mx-4 p-0",onClick:function(){return c(!a)},size:"large",children:Object(G.jsx)(F.a,{fontSize:"small",children:"playlist_add_check"})})}),Object(G.jsx)(te.a,{title:"Change labels",placement:"bottom",children:Object(G.jsx)("div",{children:Object(G.jsx)(ve,{note:x,onChange:function(e){return b("labels",e)}})})}),Object(G.jsx)(T.Controller,{name:"archive",control:m,defaultValue:!1,render:function(t){var n=t.field,a=n.onChange,c=n.value;return Object(G.jsx)(te.a,{title:c?"Unarchive":"Archive",placement:"bottom",children:Object(G.jsx)("div",{children:Object(G.jsx)(V.a,{className:"w-32 h-32 mx-4 p-0",onClick:function(){a(!c),"new"===e.variant&&setTimeout((function(){return f(d())}))},size:"large",children:Object(G.jsx)(F.a,{fontSize:"small",children:c?"unarchive":"archive"})})})})}})]}),Object(G.jsx)("div",{className:"flex items-center",children:"new"===e.variant?Object(G.jsx)($.a,{className:"m-4",type:"submit",variant:"contained",color:"secondary",size:"small",onClick:u(f),disabled:L.a.isEmpty(p)||!h,children:"Create"}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(te.a,{title:"Delete Note",placement:"bottom",children:Object(G.jsx)(V.a,{className:"w-32 h-32 mx-4 p-0",onClick:e.onRemove,size:"large",children:Object(G.jsx)(F.a,{fontSize:"small",children:"delete"})})}),Object(G.jsx)($.a,{className:"m-4",onClick:e.onClose,variant:"outlined",size:"small",children:"Close"})]})})]})]})}we.defaultProps={variant:"edit",note:null};var Ce,Se=Object(se.k)(we),De=Object(m.createAsyncThunk)("notesApp/notes/getNotes",Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/notes-app/notes");case 2:return t=e.sent,e.next=5,t.data;case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))),ze=Object(m.createAsyncThunk)("notesApp/notes/createNote",function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/notes-app/create-note",{note:t});case 2:return n=e.sent,e.next=5,n.data;case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ae=Object(m.createAsyncThunk)("notesApp/notes/updateNote",function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/notes-app/update-note",{note:t});case 2:return n=e.sent,e.next=5,n.data;case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ie=Object(m.createAsyncThunk)("notesApp/notes/removeNote",function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,c,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,n.getState,e.next=3,p.a.post("/api/notes-app/remove-note",{noteId:t});case 3:return c=e.sent,e.next=6,c.data;case 6:return l=e.sent,a(Me()),e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Te=Object(m.createEntityAdapter)({}),Le=Te.getSelectors((function(e){return e.notesApp.notes})),Ee=Le.selectAll,Fe=(Le.selectEntities,Le.selectById,Object(m.createSlice)({name:"notesApp/notes",initialState:Te.getInitialState({searchText:"",noteDialogId:null,variateDescSize:!0}),reducers:{setNotesSearchText:{reducer:function(e,t){e.searchText=t.payload},prepare:function(e){return{payload:e.target.value||""}}},resetNotesSearchText:function(e,t){e.searchText=""},toggleVariateDescSize:function(e,t){e.variateDescSize=!e.variateDescSize},openNoteDialog:function(e,t){e.noteDialogId=t.payload},closeNoteDialog:function(e,t){e.noteDialogId=t.null}},extraReducers:(Ce={},Object(c.a)(Ce,De.fulfilled,Te.setAll),Object(c.a)(Ce,ze.fulfilled,Te.addOne),Object(c.a)(Ce,Ae.fulfilled,Te.upsertOne),Object(c.a)(Ce,Ie.fulfilled,Te.removeOne),Ce)})),Ve=Fe.actions,Re=Ve.setNotesSearchText,_e=Ve.resetNotesSearchText,He=Ve.toggleVariateDescSize,Pe=Ve.openNoteDialog,Me=Ve.closeNoteDialog,Be=Fe.reducer,Ue=Object(r.forwardRef)((function(e,t){return Object(G.jsx)(X.a,Object(D.a)({direction:"up",ref:t},e))}));var We=function(e){var t=Object(s.useDispatch)(),n=Object(s.useSelector)((function(e){return e.notesApp.notes})),a=Object(A.a)((function(e){t(Ae(e))}),600);return n.entities?Object(G.jsx)(u.a,{classes:{paper:"w-full m-24"},TransitionComponent:Ue,onClose:function(e){return t(Me())},open:Boolean(n.noteDialogId),children:Object(G.jsx)(Se,{note:n.entities[n.noteDialogId],onChange:a,onClose:function(e){return t(Me())},onRemove:function(){t(Ie(n.noteDialogId))}})}):null},qe=n(199);var Ge=function(e){var t=Object(s.useDispatch)(),n=Object(r.useState)(!1),a=Object(z.a)(n,2),c=a[0],l=a[1];function i(){c&&(l(!1),document.removeEventListener("keydown",o,!1))}function o(e){27===e.keyCode&&i()}return Object(G.jsx)(qe.a,{className:"flex items-center w-full max-w-512 mt-8 mb-16 min-h-48 shadow flex-shrink-0 cursor-text",children:c?Object(G.jsx)(xe.a,{onClickAway:function(e){var t=document.querySelector(".prevent-add-close");!!t&&t.contains(e.target)||i()},children:Object(G.jsx)("div",{className:"w-full",children:Object(G.jsx)(Se,{onCreate:function(e){t(ze(e)),i()},variant:"new"})})}):Object(G.jsx)(M.a,{className:"w-full px-16 py-12 text-16 w-full",color:"textSecondary",onClick:function(e){e.stopPropagation(),l(!0),document.addEventListener("keydown",o,!1)},children:"Take a note..."})})},Je=n(2021),Ye=n(1346),Ke=n(1372),Qe={1:{fontSize:14,lineHeight:19},2:{fontSize:18,lineHeight:28},3:{fontSize:24,lineHeight:36},4:{fontSize:36,lineHeight:48},5:{fontSize:48,lineHeight:60}};var Xe=function(e,t,n){if(t){t.style.fontSize=null,t.style.lineHeight=null;var a=t.clientWidth;if(0!==a&&n){var c,l=document.createElement("div");l.style.display="inline-block",l.style.fontSize="10px",l.style.fontWeight="600",l.style.lineHeight="10px",l.style.position="absolute",l.style.whiteSpace="pre-wrap",l.style.wordWrap="break-word",l.style.pointerEvents="none",l.style.visibility="hidden",document.body.appendChild(l);var i=e.split(" ").map((function(e){return l.textContent=e.toString(),l.clientWidth})),r=Math.max.apply(Math,Object(oe.a)(i)),s=Math.floor(10*a/r);s<18?c=1:s>=18&&s<24?c=2:s>=24&&s<36?c=3:s>=36&&s<48?c=4:s>=48&&(c=5);var o=Qe[c],u=o.lineHeight,d=o.fontSize;l.textContent=e,l.style.width="".concat(a,"px"),l.style.fontSize="".concat(d,"px"),l.style.lineHeight="".concat(u,"px");var j=l.clientHeight/u;j>4&&j<6?c=4:j>=6&&j<9?c=3:j>=9&&j<11?c=2:j>=11&&(c=1),document.body.removeChild(l),u=Qe[c].lineHeight,d=Qe[c].fontSize,t.style.fontSize="".concat(d,"px"),t.style.lineHeight="".concat(u,"px")}}};var Ze=function(e){var t=Object(s.useDispatch)();return Object(G.jsx)(Ke.a.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.1}},children:Object(G.jsxs)(Ye.a,{className:Object(W.default)("cursor-pointer",e.className),onClick:function(){return t(Pe(e.note.id))},children:[e.note.image&&""!==e.note.image&&Object(G.jsx)("img",{src:e.note.image,className:"w-full block",alt:"note"}),e.note.title&&""!==e.note.title&&Object(G.jsx)(M.a,{className:"px-20 my-16 text-14 font-semibold",children:e.note.title}),e.note.description&&""!==e.note.description&&Object(G.jsx)(M.a,{className:"px-20 my-16 ",component:"div",children:Object(G.jsx)("div",{className:Object(W.default)("w-full break-words",e.variateDescSize?"font-500":"text-14"),ref:function(t){setTimeout((function(){return Xe(e.note.description,t,e.variateDescSize)}))},children:e.note.description})}),e.note.checklist&&e.note.checklist.length>0&&Object(G.jsx)("ul",{className:"px-20 my-16 flex flex-wrap list-reset",children:e.note.checklist.map((function(e){return Object(G.jsxs)("li",{className:"flex items-center w-full",children:[Object(G.jsx)(F.a,{color:"action",className:"text-16",children:e.checked?"check_box_outline":"check_box_outline_blank"}),Object(G.jsx)(M.a,{className:Object(W.default)("truncate mx-8",e.checked&&"line-through"),color:e.checked?"textSecondary":"inherit",children:e.text})]},e.id)}))}),(e.note.labels.length>0||e.note.reminder)&&Object(G.jsxs)("div",{className:"px-20 my-16 flex flex-wrap w-full -mx-2",children:[e.note.reminder&&Object(G.jsx)(re,{className:"mt-4 mx-2 max-w-full",date:e.note.reminder}),e.note.labels.map((function(e){return Object(G.jsx)(le,{id:e,className:"mt-4 mx-2 max-w-full",linkable:!0},e)}))]})]})})};var $e=Object(se.k)((function(e){var t=Object(s.useSelector)(Ee),n=Object(s.useSelector)((function(e){return e.notesApp.notes.variateDescSize})),a=Object(s.useSelector)((function(e){return e.notesApp.notes.searchText})),c=Object(r.useState)(null),l=Object(z.a)(c,2),i=l[0],o=l[1];return Object(r.useEffect)((function(){t.length>0&&o(function(){var n=e.match.params,c=n.id,l=n.labelId,i=t;return l&&(i=i.filter((function(e){return e.labels.includes(l)&&!e.archive}))),c||(i=i.filter((function(e){return!e.archive}))),"archive"===c&&(i=i.filter((function(e){return e.archive}))),"reminders"===c&&(i=i.filter((function(e){return Boolean(e.reminder)&&!e.archive}))),0===a.length?i:i=B.a.filterArrayByString(i,a)}())}),[t,a,e.match]),i&&0!==i.length?Object(G.jsx)("div",{className:"flex flex-wrap w-full",children:Object(G.jsx)(Je.a,{breakpointCols:{default:6,1920:5,1600:4,1366:3,1280:4,960:3,600:2,480:1},className:"my-masonry-grid flex w-full",columnClassName:"my-masonry-grid_column flex flex-col p-0 md:p-8",children:i.map((function(e){return Object(G.jsx)(Ze,{note:e,className:"w-full rounded-20 shadow mb-16",variateDescSize:n},e.id)}))})}):Object(G.jsx)("div",{className:"flex items-center justify-center h-full",children:Object(G.jsx)(M.a,{color:"textSecondary",variant:"h5",children:"There are no notes!"})})})),et=n(1374),tt=n(1553);function nt(e){var t=Object(s.useDispatch)(),n=Object(s.useSelector)((function(e){return e.notesApp.notes.notesSearchText})),a=Object(r.useState)(!1),c=Object(z.a)(a,2),l=c[0],i=c[1];function o(e){e.stopPropagation(),i(!0),document.addEventListener("keydown",d,!1)}function u(){i(!1),t(_e()),document.removeEventListener("keydown",d,!1)}function d(e){27===e.keyCode&&u()}return Object(G.jsxs)("div",{className:Object(W.default)("flex",e.className),children:[Object(G.jsx)(te.a,{title:"Click to search",placement:"bottom",children:Object(G.jsx)("div",{onClick:o,onKeyDown:o,role:"button",tabIndex:0,children:e.trigger})}),l&&Object(G.jsx)(xe.a,{onClickAway:function(){u()},children:Object(G.jsx)("div",{className:"absolute left-0 right-0 top-0 bottom-0 h-full z-9999 px-8 sm:px-24",children:Object(G.jsxs)(tt.a,{sx:{backgroundColor:function(e){return e.palette.primary.dark}},className:"flex items-center w-full h-full",children:[Object(G.jsx)(R.a,{placeholder:"Search for anything",className:"flex flex-1 py-0 px-16 h-64",disableUnderline:!0,fullWidth:!0,value:n,inputProps:{"aria-label":"Search"},onChange:function(e){return t(Re(e))},autoFocus:!0}),Object(G.jsx)(V.a,{onClick:u,className:"mx-8",size:"large",children:Object(G.jsx)(F.a,{children:"close"})})]})})})]})}nt.defaultProps={trigger:Object(G.jsx)(V.a,{className:"w-64 h-64",size:"large",children:Object(G.jsx)(F.a,{children:"search"})})};var at=nt;var ct=function(e){var t=Object(s.useDispatch)(),n=Object(s.useSelector)((function(e){return e.notesApp.notes.variateDescSize}));return Object(G.jsxs)("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24 relative",children:[Object(G.jsxs)("div",{className:"flex flex-shrink items-center sm:w-224",children:[Object(G.jsx)(et.a,{lgUp:!0,children:Object(G.jsx)(V.a,{onClick:function(t){return e.pageLayout.current.toggleLeftSidebar()},"aria-label":"open left sidebar",size:"large",children:Object(G.jsx)(F.a,{children:"menu"})})}),Object(G.jsxs)("div",{className:"flex items-center",children:[Object(G.jsx)(F.a,{component:Ke.a.span,initial:{scale:0},animate:{scale:1,transition:{delay:.2}},className:"text-24 md:text-32",children:"account_box"}),Object(G.jsx)(M.a,{component:Ke.a.span,initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"text-16 md:text-24 mx-12 font-semibold",children:"Notes"})]})]}),Object(G.jsxs)("div",{className:"flex flex-1 items-center justify-end",children:[Object(G.jsx)(te.a,{title:"Toggle Variate Description Size",children:Object(G.jsx)(V.a,{onClick:function(e){return t(He())},size:"large",children:Object(G.jsx)(F.a,{color:n?"action":"disabled",children:"format_size"})})}),Object(G.jsx)(at,{})]})]})},lt=n(113),it=n(1344),rt=n(1343),st=Object(o.a)(P.a)((function(e){var t=e.theme;e.active;return{color:"inherit!important",textDecoration:"none!important",height:40,width:"100%",borderRadius:6,paddingLeft:12,paddingRight:12,marginBottom:4,"&.active":{backgroundColor:"light"===t.palette.mode?"rgba(0, 0, 0, .05)!important":"rgba(255, 255, 255, .1)!important",pointerEvents:"none","& .list-item-icon":{color:"inherit"}},"& .list-item-icon":{fontSize:16,width:16,height:16,marginRight:16}}}));var ot=function(e){var t=Object(s.useDispatch)(),n=Object(s.useSelector)(g);return Object(G.jsx)("div",{className:"p-0 lg:p-24 lg:ltr:pr-4 lg:rtl:pl-4",children:Object(G.jsxs)(qe.a,{component:Ke.a.div,initial:{y:20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},className:Object(W.default)("rounded-0 shadow-none lg:rounded-20 lg:shadow pt-12"),children:[Object(G.jsxs)(H.a,{className:"px-12",children:[Object(G.jsxs)(st,{button:!0,component:lt.a,to:"/apps/notes",exact:!0,activeClassName:"active",children:[Object(G.jsx)(F.a,{className:"list-item-icon text-16",color:"action",children:"label"}),Object(G.jsx)(fe.a,{className:"truncate",primary:"Notes",disableTypography:!0})]}),Object(G.jsxs)(st,{button:!0,component:lt.a,to:"/apps/notes/reminders",exact:!0,activeClassName:"active",children:[Object(G.jsx)(F.a,{className:"list-item-icon text-16",color:"action",children:"notifications"}),Object(G.jsx)(fe.a,{className:"truncate",primary:"Reminders",disableTypography:!0})]})]}),Object(G.jsx)(it.a,{}),Object(G.jsxs)(H.a,{className:"px-12",children:[Object(G.jsx)(rt.a,{children:"Labels"}),n.map((function(e){return Object(G.jsxs)(st,{button:!0,component:lt.a,to:"/apps/notes/labels/".concat(e.handle,"/").concat(e.id),exact:!0,activeClassName:"active",children:[Object(G.jsx)(F.a,{className:"list-item-icon text-16",color:"action",children:"label"}),Object(G.jsx)(fe.a,{className:"truncate",primary:e.name,disableTypography:!0})]},e.id)})),Object(G.jsxs)(st,{button:!0,onClick:function(e){return t(w())},children:[Object(G.jsx)(F.a,{className:"list-item-icon text-16",color:"action",children:"edit"}),Object(G.jsx)(fe.a,{className:"truncate",primary:"Edit Labels",disableTypography:!0})]})]}),Object(G.jsx)(it.a,{}),Object(G.jsx)(H.a,{className:"px-12",children:Object(G.jsxs)(st,{button:!0,component:lt.a,to:"/apps/notes/archive",activeClassName:"active",children:[Object(G.jsx)(F.a,{className:"list-item-icon text-16",color:"action",children:"archive"}),Object(G.jsx)(fe.a,{className:"truncate",primary:"Archive",disableTypography:!0})]})})]})})},ut=n(160),dt=Object(ut.d)({notes:Be,labels:S}),jt=Object(o.a)(l.a)((function(e){var t=e.theme;return{"& .FusePageSimple-header":{minHeight:72,height:72},"& .FusePageSimple-contentWrapper":Object(c.a)({padding:16,paddingBottom:80},t.breakpoints.up("sm"),{padding:24}),"& .FusePageSimple-content":{display:"flex",minHeight:"100%"},"& .FusePageSimple-sidebar":{width:256,border:0}}}));t.default=Object(i.a)("notesApp",dt)((function(e){var t=Object(s.useDispatch)(),n=Object(r.useRef)(null);return Object(r.useEffect)((function(){t(De()),t(x())}),[t]),Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(jt,{header:Object(G.jsx)(ct,{pageLayout:n}),content:Object(G.jsxs)("div",{className:"flex flex-col w-full items-center",children:[Object(G.jsx)(Ge,{}),Object(G.jsx)($e,{}),Object(G.jsx)(We,{}),Object(G.jsx)(Q,{})]}),leftSidebarContent:Object(G.jsx)(ot,{}),sidebarInner:!0,ref:n})})}))}}]);